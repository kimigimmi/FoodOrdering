{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport { API } from \"./api\";\nconst initialState = {\n  user: null,\n  loading: false\n};\nexport const me = createAsyncThunk(\"auth/me\", async () => {\n  const {\n    data\n  } = await API.get(\"/api/auth/me\");\n  return data;\n});\nexport const login = createAsyncThunk(\"auth/login\", async (payload, {\n  rejectWithValue\n}) => {\n  try {\n    const {\n      data\n    } = await API.post(\"/api/auth/login\", payload);\n    return data;\n  } catch (e) {\n    var _e$response, _e$response$data;\n    return rejectWithValue((e === null || e === void 0 ? void 0 : (_e$response = e.response) === null || _e$response === void 0 ? void 0 : (_e$response$data = _e$response.data) === null || _e$response$data === void 0 ? void 0 : _e$response$data.error) || e.message);\n  }\n});\nexport const register = createAsyncThunk(\"auth/register\", async (p, {\n  rejectWithValue\n}) => {\n  try {\n    await API.post(\"/api/auth/register\", p);\n    return true;\n  } catch (e) {\n    var _e$response2, _e$response2$data;\n    return rejectWithValue((e === null || e === void 0 ? void 0 : (_e$response2 = e.response) === null || _e$response2 === void 0 ? void 0 : (_e$response2$data = _e$response2.data) === null || _e$response2$data === void 0 ? void 0 : _e$response2$data.error) || e.message);\n  }\n});\nexport const logout = createAsyncThunk(\"auth/logout\", async () => {\n  await API.post(\"/api/auth/logout\");\n});\nconst slice = createSlice({\n  name: \"auth\",\n  initialState,\n  reducers: {},\n  extraReducers: b => {\n    b.addCase(me.fulfilled, (s, a) => {\n      s.user = a.payload;\n    });\n    b.addCase(login.pending, s => {\n      s.loading = true;\n      s.error = undefined;\n    });\n    b.addCase(login.fulfilled, (s, a) => {\n      s.loading = false;\n      s.user = a.payload;\n    });\n    b.addCase(login.rejected, (s, a) => {\n      s.loading = false;\n      s.error = String(a.payload || a.error.message);\n    });\n    b.addCase(register.rejected, (s, a) => {\n      s.error = String(a.payload || a.error.message);\n    });\n    b.addCase(logout.fulfilled, s => {\n      s.user = null;\n    });\n  }\n});\nexport default slice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","API","initialState","user","loading","me","data","get","login","payload","rejectWithValue","post","e","_e$response","_e$response$data","response","error","message","register","p","_e$response2","_e$response2$data","logout","slice","name","reducers","extraReducers","b","addCase","fulfilled","s","a","pending","undefined","rejected","String","reducer"],"sources":["C:/Users/SÃ¼leyman/Desktop/FoodOrdering/frontend/src/store/authSlice.ts"],"sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\r\nimport { API } from \"./api\";\r\n\r\nexport type User = { id: number; email: string; name?: string | null; emailVerifiedAt?: string | null };\r\n\r\ntype State = { user: User | null; loading: boolean; error?: string };\r\nconst initialState: State = { user: null, loading: false };\r\n\r\nexport const me = createAsyncThunk(\"auth/me\", async () => {\r\n  const { data } = await API.get(\"/api/auth/me\");\r\n  return data as User | null;\r\n});\r\nexport const login = createAsyncThunk(\"auth/login\", async (payload: { email: string; password: string }, { rejectWithValue }) => {\r\n  try { const { data } = await API.post(\"/api/auth/login\", payload); return data as User; }\r\n  catch (e: any) { return rejectWithValue(e?.response?.data?.error || e.message); }\r\n});\r\nexport const register = createAsyncThunk(\"auth/register\", async (p: { email: string; password: string; name?: string }, { rejectWithValue }) => {\r\n  try { await API.post(\"/api/auth/register\", p); return true; }\r\n  catch (e: any) { return rejectWithValue(e?.response?.data?.error || e.message); }\r\n});\r\nexport const logout = createAsyncThunk(\"auth/logout\", async () => {\r\n  await API.post(\"/api/auth/logout\");\r\n});\r\n\r\nconst slice = createSlice({\r\n  name: \"auth\",\r\n  initialState,\r\n  reducers: {},\r\n  extraReducers: (b) => {\r\n    b.addCase(me.fulfilled, (s, a) => { s.user = a.payload; });\r\n    b.addCase(login.pending, (s) => { s.loading = true; s.error = undefined; });\r\n    b.addCase(login.fulfilled, (s, a) => { s.loading = false; s.user = a.payload; });\r\n    b.addCase(login.rejected, (s, a) => { s.loading = false; s.error = String(a.payload || a.error.message); });\r\n    b.addCase(register.rejected, (s, a) => { s.error = String(a.payload || a.error.message); });\r\n    b.addCase(logout.fulfilled, (s) => { s.user = null; });\r\n  },\r\n});\r\nexport default slice.reducer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}