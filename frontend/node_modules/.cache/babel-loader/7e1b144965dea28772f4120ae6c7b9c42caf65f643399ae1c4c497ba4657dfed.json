{"ast":null,"code":"import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\nimport { API } from '../lib/api';\nconst initial = {\n  data: [],\n  loading: false,\n  error: null\n};\nexport const fetchComments = createAsyncThunk('comments/fetch', async () => {\n  const {\n    data\n  } = await axios.get(`${API}/api/comments`);\n  return data;\n});\nexport const addComment = createAsyncThunk('comments/add', async p => {\n  const {\n    data\n  } = await axios.post(`${API}/api/comments`, p);\n  return data;\n});\nconst slice = createSlice({\n  name: 'comments',\n  initialState: initial,\n  reducers: {},\n  extraReducers: b => {\n    b.addCase(fetchComments.pending, s => {\n      s.loading = true;\n      s.error = null;\n    }).addCase(fetchComments.fulfilled, (s, a) => {\n      s.loading = false;\n      s.data = a.payload;\n    }).addCase(fetchComments.rejected, (s, a) => {\n      var _a$error$message;\n      s.loading = false;\n      s.error = (_a$error$message = a.error.message) !== null && _a$error$message !== void 0 ? _a$error$message : 'failed';\n    }).addCase(addComment.fulfilled, (s, a) => {\n      s.data = [a.payload, ...s.data];\n    });\n  }\n});\nexport default slice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","axios","API","initial","data","loading","error","fetchComments","get","addComment","p","post","slice","name","initialState","reducers","extraReducers","b","addCase","pending","s","fulfilled","a","payload","rejected","_a$error$message","message","reducer"],"sources":["C:/Users/SÃ¼leyman/Desktop/FoodOrdering/frontend/src/store/commentsSlice.ts"],"sourcesContent":["import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\r\nimport axios from 'axios';\r\nimport { API } from '../lib/api';\r\nimport type { CommentModel } from '../types';\r\n\r\ntype State = { data: CommentModel[]; loading: boolean; error?: string | null };\r\nconst initial: State = { data: [], loading: false, error: null };\r\n\r\nexport const fetchComments = createAsyncThunk<CommentModel[]>('comments/fetch', async () => {\r\n  const { data } = await axios.get<CommentModel[]>(`${API}/api/comments`);\r\n  return data;\r\n});\r\n\r\nexport const addComment = createAsyncThunk<CommentModel, { name: string; text: string }>(\r\n  'comments/add', async (p) => {\r\n    const { data } = await axios.post<CommentModel>(`${API}/api/comments`, p);\r\n    return data;\r\n  }\r\n);\r\n\r\nconst slice = createSlice({\r\n  name: 'comments',\r\n  initialState: initial,\r\n  reducers: {},\r\n  extraReducers: b => {\r\n    b.addCase(fetchComments.pending, s => { s.loading = true; s.error = null; })\r\n     .addCase(fetchComments.fulfilled, (s, a) => { s.loading = false; s.data = a.payload; })\r\n     .addCase(fetchComments.rejected, (s, a) => { s.loading = false; s.error = a.error.message ?? 'failed'; })\r\n     .addCase(addComment.fulfilled, (s, a) => { s.data = [a.payload, ...s.data]; });\r\n  }\r\n});\r\n\r\nexport default slice.reducer;\r\n"],"mappings":"AAAA,SAASA,gBAAgB,EAAEC,WAAW,QAAQ,kBAAkB;AAChE,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,GAAG,QAAQ,YAAY;AAIhC,MAAMC,OAAc,GAAG;EAAEC,IAAI,EAAE,EAAE;EAAEC,OAAO,EAAE,KAAK;EAAEC,KAAK,EAAE;AAAK,CAAC;AAEhE,OAAO,MAAMC,aAAa,GAAGR,gBAAgB,CAAiB,gBAAgB,EAAE,YAAY;EAC1F,MAAM;IAAEK;EAAK,CAAC,GAAG,MAAMH,KAAK,CAACO,GAAG,CAAiB,GAAGN,GAAG,eAAe,CAAC;EACvE,OAAOE,IAAI;AACb,CAAC,CAAC;AAEF,OAAO,MAAMK,UAAU,GAAGV,gBAAgB,CACxC,cAAc,EAAE,MAAOW,CAAC,IAAK;EAC3B,MAAM;IAAEN;EAAK,CAAC,GAAG,MAAMH,KAAK,CAACU,IAAI,CAAe,GAAGT,GAAG,eAAe,EAAEQ,CAAC,CAAC;EACzE,OAAON,IAAI;AACb,CACF,CAAC;AAED,MAAMQ,KAAK,GAAGZ,WAAW,CAAC;EACxBa,IAAI,EAAE,UAAU;EAChBC,YAAY,EAAEX,OAAO;EACrBY,QAAQ,EAAE,CAAC,CAAC;EACZC,aAAa,EAAEC,CAAC,IAAI;IAClBA,CAAC,CAACC,OAAO,CAACX,aAAa,CAACY,OAAO,EAAEC,CAAC,IAAI;MAAEA,CAAC,CAACf,OAAO,GAAG,IAAI;MAAEe,CAAC,CAACd,KAAK,GAAG,IAAI;IAAE,CAAC,CAAC,CAC1EY,OAAO,CAACX,aAAa,CAACc,SAAS,EAAE,CAACD,CAAC,EAAEE,CAAC,KAAK;MAAEF,CAAC,CAACf,OAAO,GAAG,KAAK;MAAEe,CAAC,CAAChB,IAAI,GAAGkB,CAAC,CAACC,OAAO;IAAE,CAAC,CAAC,CACtFL,OAAO,CAACX,aAAa,CAACiB,QAAQ,EAAE,CAACJ,CAAC,EAAEE,CAAC,KAAK;MAAA,IAAAG,gBAAA;MAAEL,CAAC,CAACf,OAAO,GAAG,KAAK;MAAEe,CAAC,CAACd,KAAK,IAAAmB,gBAAA,GAAGH,CAAC,CAAChB,KAAK,CAACoB,OAAO,cAAAD,gBAAA,cAAAA,gBAAA,GAAI,QAAQ;IAAE,CAAC,CAAC,CACxGP,OAAO,CAACT,UAAU,CAACY,SAAS,EAAE,CAACD,CAAC,EAAEE,CAAC,KAAK;MAAEF,CAAC,CAAChB,IAAI,GAAG,CAACkB,CAAC,CAACC,OAAO,EAAE,GAAGH,CAAC,CAAChB,IAAI,CAAC;IAAE,CAAC,CAAC;EACjF;AACF,CAAC,CAAC;AAEF,eAAeQ,KAAK,CAACe,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}